<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Search Media</title>
    <script src="./apiKeyGetter.js"></script>
  </head>
  <body>
    <h1>Search Media</h1>
    <form id="search-form">
      <label for="media-type">Type:</label>
      <select id="media-type" name="type">
        <option value="song">Song</option>
        <option value="movie">Movie</option>
        <option value="book">Book</option>
        <option value="tv_series">TV Series</option>
      </select>
      <br>
      <label for="media-title">Title:</label>
      <input type="text" id="media-title" name="title">
      <br>
      <button type="submit" id="search-btn">Search</button>
    </form>
    <script>
      const apiKey = window.apiKey;
      //const apiKey = 'eg20193667';
      
      const searchForm = document.getElementById('search-form');
      searchForm.addEventListener('submit', (event) => {
        event.preventDefault();
        const mediaType = document.getElementById('media-type').value;
        const mediaTitle = document.getElementById('media-title').value;
        //const url = `/search?type=${mediaType}&title=${mediaTitle}&apiKey=${apiKey}`;
        const url = `http://localhost:3000/login?api=${apiKey}&type=${mediaType}&title=${mediaTitle}`;
        fetch(url, {
              method: 'GET',
              headers: {
              'Content-Type': 'application/json'
              },
            })
        .then(response => response.text())
        .then(data => {
            console.log(data);
        })
        .catch(error => console.error(error));
      });
    </script>
  </body>
</html>
